import{D as C,r as x,v as e,G as t,L as w,S as A,T as p,E as g}from"./index-BEIPIjYA.js";import{h as E,u as L,f as T,g as B,l as U,F as G,c as I,a as M,T as R,A as F,B as H,b as W,S as D,e as q}from"./PureCipher-PrimaryLogo-BlackBlue-3gj0xLo_.js";const z="https://api.purecipher.com/personalboss/",O=async o=>{var n;try{return(await E.post(z+"generate-signed-url",{email:o},{headers:{"Content-Type":"application/json"}})).data}catch(r){throw((n=r.response)==null?void 0:n.data)||r.message}},P=({...o})=>{const n=C(),r=L(n.breakpoints.down("md")),[S,c]=x.useState(!1),[f,j]=x.useState(""),[v,b]=x.useState("error"),y=()=>{c(!1)};return e.jsx(T,{children:e.jsx(t,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:e.jsx(t,{item:!0,xs:12,children:e.jsx(t,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:e.jsx(t,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:e.jsx(B,{children:e.jsxs(t,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[e.jsx(t,{item:!0,sx:{mb:3},children:e.jsx(w,{to:"#","aria-label":"theme logo",children:e.jsx("img",{src:U,alt:"Logo",style:{width:"150px",height:"auto"}})})}),e.jsx(t,{item:!0,xs:12,children:e.jsxs(A,{alignItems:"center",justifyContent:"center",spacing:1,children:[e.jsx(p,{color:"secondary.main",gutterBottom:!0,variant:r?"h3":"h2",children:"Generate Signed URL"}),e.jsx(p,{variant:"caption",fontSize:"16px",textAlign:{xs:"center",md:"inherit"},children:"Enter your email to receive a download link"})]})}),e.jsxs(t,{item:!0,xs:12,children:[e.jsx(g,{sx:{mb:2},children:e.jsx(p,{variant:"subtitle1",children:"Generate Signed URL"})}),e.jsx(G,{initialValues:{email:"",submit:null},validationSchema:I().shape({email:M().email("Must be a valid email").max(255).required("Email is required")}),onSubmit:async(l,{setErrors:m,setStatus:d,setSubmitting:u,resetForm:h})=>{var i;try{const s=await O(l.email);j(s.message),b("success"),c(!0),h()}catch(s){u(!1),d({success:!1});const a=((i=s==null?void 0:s.detail)==null?void 0:i.map(k=>k.msg).join(", "))||"Error generating signed URL";m({submit:a}),j(a),b("error"),c(!0)}},children:({errors:l,handleBlur:m,handleChange:d,handleSubmit:u,isSubmitting:h,touched:i,values:s,status:a})=>e.jsxs("form",{noValidate:!0,onSubmit:u,...o,children:[e.jsx(t,{container:!0,spacing:r?0:2,children:e.jsx(t,{item:!0,xs:12,children:e.jsx(R,{fullWidth:!0,label:"Email Address",margin:"normal",name:"email",type:"email",value:s.email,onBlur:m,onChange:d,error:!!(i.email&&l.email),helperText:i.email&&l.email,sx:{...n.typography.customInput}})})}),e.jsx(g,{sx:{mt:2},children:e.jsx(F,{children:e.jsx(H,{disableElevation:!0,disabled:h,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Generate URL"})})}),(a==null?void 0:a.submit)&&e.jsx(g,{sx:{mt:3},children:e.jsx(W,{error:!0,children:a.submit})})]})}),e.jsx(D,{open:S,autoHideDuration:6e3,onClose:y,children:e.jsx(q,{onClose:y,severity:v,sx:{width:"100%"},children:f})})]})]})})})})})})})};export{P as default};
