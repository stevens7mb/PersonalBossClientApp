import{D as O,r as x,v as e,G as t,L as A,S as B,T as d,E as h}from"./index-BEIPIjYA.js";import{u as E,f as _,g as I,l as M,F as V,c as w,a as b,T as f,A as P,B as W,b as q,S as F,e as H}from"./PureCipher-PrimaryLogo-BlackBlue-3gj0xLo_.js";import{v as D}from"./authService-6uih7VJs.js";const $=({...v})=>{const o=O(),p=E(o.breakpoints.down("md")),[S,c]=x.useState(!1),[T,j]=x.useState(""),[k,g]=x.useState("error"),y=()=>{c(!1)};return e.jsx(_,{children:e.jsx(t,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:e.jsx(t,{item:!0,xs:12,children:e.jsx(t,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:e.jsx(t,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:e.jsx(I,{children:e.jsxs(t,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[e.jsx(t,{item:!0,sx:{mb:3},children:e.jsx(A,{to:"#","aria-label":"theme logo",children:e.jsx("img",{src:M,alt:"Logo",style:{width:"150px",height:"auto"}})})}),e.jsx(t,{item:!0,xs:12,children:e.jsxs(B,{alignItems:"center",justifyContent:"center",spacing:1,children:[e.jsx(d,{color:"secondary.main",gutterBottom:!0,variant:p?"h3":"h2",children:"Sign up"}),e.jsx(d,{variant:"caption",fontSize:"16px",textAlign:{xs:"center",md:"inherit"},children:"Enter your information"})]})}),e.jsxs(t,{item:!0,xs:12,children:[e.jsx(h,{sx:{mb:2},children:e.jsx(d,{variant:"subtitle1",children:"Verify OTP"})}),e.jsx(V,{initialValues:{otp_value:"",email:"",submit:null},validationSchema:w().shape({otp_value:b().required("OTP is required"),email:b().email("Must be a valid email").max(255).required("Email is required")}),onSubmit:async(i,{setErrors:n,setStatus:l,setSubmitting:m,resetForm:u})=>{var a;try{const r=await D(i);j(r.message),g("success"),c(!0),u()}catch(r){m(!1),l({success:!1});const s=((a=r==null?void 0:r.detail)==null?void 0:a.map(C=>C.msg).join(", "))||"Error verifying OTP";n({submit:s}),j(s),g("error"),c(!0)}},children:({errors:i,handleBlur:n,handleChange:l,handleSubmit:m,isSubmitting:u,touched:a,values:r,status:s})=>e.jsxs("form",{noValidate:!0,onSubmit:m,...v,children:[e.jsxs(t,{container:!0,spacing:p?0:2,children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(f,{fullWidth:!0,label:"Email Address",margin:"normal",name:"email",type:"email",value:r.email,onBlur:n,onChange:l,error:!!(a.email&&i.email),helperText:a.email&&i.email,sx:{...o.typography.customInput}})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(f,{fullWidth:!0,label:"OTP Value",margin:"normal",name:"otp_value",type:"text",value:r.otp_value,onBlur:n,onChange:l,error:!!(a.otp_value&&i.otp_value),helperText:a.otp_value&&i.otp_value,sx:{...o.typography.customInput}})})]}),e.jsx(h,{sx:{mt:2},children:e.jsx(P,{children:e.jsx(W,{disableElevation:!0,disabled:u,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"secondary",children:"Verify OTP"})})}),(s==null?void 0:s.submit)&&e.jsx(h,{sx:{mt:3},children:e.jsx(q,{error:!0,children:s.submit})})]})}),e.jsx(F,{open:S,autoHideDuration:6e3,onClose:y,children:e.jsx(H,{onClose:y,severity:k,sx:{width:"100%"},children:T})})]})]})})})})})})})};export{$ as default};
